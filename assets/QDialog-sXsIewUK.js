import{y as O,ay as he,g as A,az as ge,c,_ as be,aP as ke,h as f,a0 as L,aQ as qe,H as ye,C as Se,A as Y,v as we,G as _e,aR as $,r as B,b as xe,B as Ce,aS as Be,aT as Pe,aU as Ee,R as Z,ap as Te,w as G,au as N,E as $e,at as De}from"./index-CyAApWQ1.js";import{u as Fe,a as Re}from"./use-dark-OngEoRQ1.js";import{u as ze,a as Qe,b as Me,c as He,d as Le,e as Oe}from"./couponsStore-Cl6Cd1HV.js";import{b as W,c as Ae,a as Ie}from"./focus-manager-zjdVGI5d.js";const Ke={xs:8,sm:10,md:14,lg:20,xl:24},ot=O({name:"QChip",props:{...Fe,...he,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:i,emit:a}){const{proxy:{$q:l}}=A(),s=Re(e,l),r=ge(e,Ke),u=c(()=>e.selected===!0||e.icon!==void 0),v=c(()=>e.selected===!0?e.iconSelected||l.iconSet.chip.selected:e.icon),m=c(()=>e.iconRemove||l.iconSet.chip.remove),d=c(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),g=c(()=>{const n=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(n?` text-${n} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(d.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(s.value===!0?" q-chip--dark q-dark":"")}),h=c(()=>{const n=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},x={...n,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||l.lang.label.remove};return{chip:n,remove:x}});function b(n){n.keyCode===13&&w(n)}function w(n){e.disable||(a("update:selected",!e.selected),a("click",n))}function _(n){(n.keyCode===void 0||n.keyCode===13)&&(ye(n),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function F(){const n=[];d.value===!0&&n.push(f("div",{class:"q-focus-helper"})),u.value===!0&&n.push(f(L,{class:"q-chip__icon q-chip__icon--left",name:v.value}));const x=e.label!==void 0?[f("div",{class:"ellipsis"},[e.label])]:void 0;return n.push(f("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},qe(i.default,x))),e.iconRight&&n.push(f(L,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&n.push(f(L,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:m.value,...h.value.remove,onClick:_,onKeyup:_})),n}return()=>{if(e.modelValue===!1)return;const n={class:g.value,style:r.value};return d.value===!0&&Object.assign(n,h.value.chip,{onClick:w,onKeyup:b}),be("div",n,F(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ke,e.ripple]])}}});function pe(){let e;const i=A();function a(){e=void 0}return Se(a),Y(a),{removeTick:a,registerTick(l){e=l,we(()=>{e===l&&(_e(i)===!1&&e(),e=void 0)})}}}const je={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Ve(e,i=()=>{},a=()=>{}){return{transitionProps:c(()=>{const l=`q-transition--${e.transitionShow||i()}`,s=`q-transition--${e.transitionHide||a()}`;return{appear:!0,enterFromClass:`${l}-enter-from`,enterActiveClass:`${l}-enter-active`,enterToClass:`${l}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:c(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const D=[];function st(e){return D.find(i=>i.contentEl!==null&&i.contentEl.contains(e))}function Ge(e,i){do{if(e.$options.name==="QMenu"){if(e.hide(i),e.$props.separateClosePopup===!0)return $(e)}else if(e.__qPortal===!0){const a=$(e);return a?.$options.name==="QPopupProxy"?(e.hide(i),a):e}e=$(e)}while(e!=null)}function ut(e,i,a){for(;a!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(a--,e.$options.name==="QMenu"){e=Ge(e,i);continue}e.hide(i)}e=$(e)}}const Ne=O({name:"QPortal",setup(e,{slots:i}){return()=>i.default()}});function We(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Ue(e,i,a,l){const s=B(!1),r=B(!1);let u=null;const v={},m=l==="dialog"&&We(e);function d(h){if(h===!0){W(v),r.value=!0;return}r.value=!1,s.value===!1&&(m===!1&&u===null&&(u=Pe(!1,l)),s.value=!0,D.push(e.proxy),Ae(v))}function g(h){if(r.value=!1,h!==!0)return;W(v),s.value=!1;const b=D.indexOf(e.proxy);b!==-1&&D.splice(b,1),u!==null&&(Ee(u),u=null)}return xe(()=>{g(!0)}),e.proxy.__qPortal=!0,Ce(e.proxy,"contentEl",()=>i.value),{showPortal:d,hidePortal:g,portalIsActive:s,portalIsAccessible:r,renderPortal:()=>m===!0?a():s.value===!0?[f(Be,{to:u},f(Ne,a))]:void 0}}const k=[];let S;function Je(e){S=e.keyCode===27}function Xe(){S===!0&&(S=!1)}function Ye(e){S===!0&&(S=!1,Te(e,27)===!0&&k[k.length-1](e))}function ee(e){window[e]("keydown",Je),window[e]("blur",Xe),window[e]("keyup",Ye),S=!1}function Ze(e){Z.is.desktop===!0&&(k.push(e),k.length===1&&ee("addEventListener"))}function U(e){const i=k.indexOf(e);i!==-1&&(k.splice(i,1),k.length===0&&ee("removeEventListener"))}const q=[];function te(e){q[q.length-1](e)}function et(e){Z.is.desktop===!0&&(q.push(e),q.length===1&&document.body.addEventListener("focusin",te))}function J(e){const i=q.indexOf(e);i!==-1&&(q.splice(i,1),q.length===0&&document.body.removeEventListener("focusin",te))}let T=0;const tt={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},X={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},rt=O({name:"QDialog",inheritAttrs:!1,props:{...Qe,...je,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...ze,"shake","click","escapeKey"],setup(e,{slots:i,emit:a,attrs:l}){const s=A(),r=B(null),u=B(!1),v=B(!1);let m=null,d=null,g,h;const b=c(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:w}=Oe(),{registerTimeout:_}=Me(),{registerTick:F,removeTick:n}=pe(),{transitionProps:x,transitionStyle:I}=Ve(e,()=>X[e.position][0],()=>X[e.position][1]),ne=c(()=>I.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:K,hidePortal:p,portalIsAccessible:ie,renderPortal:ae}=Ue(s,r,ve,"dialog"),{hide:P}=He({showing:u,hideOnRouteChange:b,handleShow:ce,handleHide:de,processOnMount:!0}),{addToHistory:le,removeFromHistory:oe}=Le(u,P,b),se=c(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${tt[e.position]}`+(v.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),E=c(()=>u.value===!0&&e.seamless!==!0),ue=c(()=>e.autoClose===!0?{onClick:fe}:{}),re=c(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${E.value===!0?"modal":"seamless"}`,l.class]);G(()=>e.maximized,t=>{u.value===!0&&Q(t)}),G(E,t=>{w(t),t===!0?(et(M),Ze(z)):(J(M),U(z))});function ce(t){le(),d=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,Q(e.maximized),K(),v.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),F(C)):n(),_(()=>{if(s.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:o,bottom:y}=document.activeElement.getBoundingClientRect(),{innerHeight:V}=window,H=window.visualViewport!==void 0?window.visualViewport.height:V;o>0&&y>H/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-H,y>=V?1/0:Math.ceil(document.scrollingElement.scrollTop+y-H/2))),document.activeElement.scrollIntoView()}h=!0,r.value.click(),h=!1}K(!0),v.value=!1,a("show",t)},e.transitionDuration)}function de(t){n(),oe(),j(!0),v.value=!0,p(),d!==null&&(((t?.type.indexOf("key")===0?d.closest('[tabindex]:not([tabindex^="-"])'):void 0)||d).focus(),d=null),_(()=>{p(!0),v.value=!1,a("hide",t)},e.transitionDuration)}function C(t){Ie(()=>{let o=r.value;if(o!==null){if(t!==void 0){const y=o.querySelector(t);if(y!==null){y.focus({preventScroll:!0});return}}o.contains(document.activeElement)!==!0&&(o=o.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.querySelector("[autofocus], [data-autofocus]")||o,o.focus({preventScroll:!0}))}})}function R(t){t&&typeof t.focus=="function"?t.focus({preventScroll:!0}):C(),a("shake");const o=r.value;o!==null&&(o.classList.remove("q-animate--scale"),o.classList.add("q-animate--scale"),m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,r.value!==null&&(o.classList.remove("q-animate--scale"),C())},170))}function z(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&R():(a("escapeKey"),P()))}function j(t){m!==null&&(clearTimeout(m),m=null),(t===!0||u.value===!0)&&(Q(!1),e.seamless!==!0&&(w(!1),J(M),U(z))),t!==!0&&(d=null)}function Q(t){t===!0?g!==!0&&(T<1&&document.body.classList.add("q-body--dialog"),T++,g=!0):g===!0&&(T<2&&document.body.classList.remove("q-body--dialog"),T--,g=!1)}function fe(t){h!==!0&&(P(t),a("click",t))}function me(t){e.persistent!==!0&&e.noBackdropDismiss!==!0?P(t):e.noShake!==!0&&R()}function M(t){e.allowFocusOutside!==!0&&ie.value===!0&&De(r.value,t.target)!==!0&&C('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:C,shake:R,__updateRefocusTarget(t){d=t||null}}),Y(j);function ve(){return f("div",{role:"dialog","aria-modal":E.value===!0?"true":"false",...l,class:re.value},[f(N,{name:"q-transition--fade",appear:!0},()=>E.value===!0?f("div",{class:"q-dialog__backdrop fixed-full",style:ne.value,"aria-hidden":"true",tabindex:-1,onClick:me}):null),f(N,x.value,()=>u.value===!0?f("div",{ref:r,class:se.value,style:I.value,tabindex:-1,...ue.value},$e(i.default)):null)])}return ae}});export{ot as Q,rt as a,pe as b,ut as c,Ve as d,Ue as e,Ze as f,st as g,et as h,J as i,Ge as j,D as p,U as r,je as u};
